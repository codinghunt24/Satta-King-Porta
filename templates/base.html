<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Satta King | Satta King 786 | Delhi Satta King | Satta King Fast Live Result 2026{% endblock %}</title>
    <meta name="description" content="{% block description %}Satta King Fast Live Results 2026 - Check Satta King Disawar, Gali Disawar, Delhi Bazar Satta King, Shri Ganesh Satta King, Faridabad, Ghaziabad results. Satta King Chart & Daily Updates.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}satta king, satta king 786, delhi satta king, satta king disawar, satta king gali, gali disawar, satta king chart, satta king result, satta king 2026, black satta king, shri ganesh satta king, delhi bazar satta king, satta king faridabad, satta king ghaziabad, satta king fast, satta king live, satta king today{% endblock %}">
    <meta name="robots" content="index, follow">
    {% if google_verify %}<meta name="google-site-verification" content="{{ google_verify }}">{% endif %}
    {% if bing_verify %}<meta name="msvalidate.01" content="{{ bing_verify }}">{% endif %}
    {% if adsense_verification %}{{ adsense_verification|safe }}{% endif %}
    <meta property="og:title" content="{% block og_title %}Satta King | Satta King 786{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Get fastest Satta King results{% endblock %}">
    <meta property="og:type" content="website">
    <link rel="canonical" href="{% block canonical %}/{% endblock %}">
    <link rel="stylesheet" href="/css/style.css">
    {% if analytics_code %}{{ analytics_code|safe }}{% endif %}
    {% if adsense_auto_ads %}{{ adsense_auto_ads|safe }}{% endif %}
    {% block extra_head %}{% endblock %}
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Satta <span>King</span></h1>
                </div>
                <button class="mobile-menu" onclick="toggleMenu()">&#9776;</button>
                <nav id="mainNav">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/daily-updates">Daily Update</a></li>
                        <li><a href="/news">News</a></li>
                        <li><a href="/chart">Chart</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="/page/about">About</a>
                <a href="/page/contact">Contact</a>
                <a href="/page/disclaimer">Disclaimer</a>
                <a href="/page/privacy-policy">Privacy Policy</a>
                <a href="/page/terms-conditions">Terms & Conditions</a>
            </div>
            <p>&copy; 2026 Satta King. All Rights Reserved.</p>
            <p>Satta King Fast Results | Delhi Satta King | Satta King 786 | Satta King Chart</p>
        </div>
    </footer>

    <div id="push-prompt" style="display:none; position:fixed; top:15px; left:50%; transform:translateX(-50%) translateY(-150%); width:90%; max-width:400px; background:linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color:#fff; padding:14px 18px; z-index:10000; box-shadow:0 10px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,215,0,0.2); border-radius:14px; transition:transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);">
        <div style="display:flex; align-items:center; gap:12px; margin-bottom:12px;">
            <div style="width:38px; height:38px; background:linear-gradient(135deg, #ffd700, #ff8c00); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1.2rem; flex-shrink:0;">ðŸ””</div>
            <div style="flex:1; min-width:0;">
                <div style="font-size:0.95rem; font-weight:600; color:#ffd700;">{{ push_prompt_title or 'Get Live Results!' }}</div>
                <div style="font-size:0.8rem; color:#a0aec0;">{{ push_prompt_message or 'Instant Satta King updates' }}</div>
            </div>
        </div>
        <div style="display:flex; gap:8px;">
            <button onclick="subscribePush()" style="flex:1; background:linear-gradient(135deg, #10b981, #059669); color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; font-size:0.85rem; transition:transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='scale(1.02)';this.style.boxShadow='0 4px 15px rgba(16,185,129,0.4)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='none'">
                Enable
            </button>
            <button onclick="dismissPush()" style="background:rgba(255,255,255,0.08); color:#9ca3af; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; font-size:0.85rem; transition:background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.12)'" onmouseout="this.style.background='rgba(255,255,255,0.08)'">
                Later
            </button>
        </div>
    </div>

    <script>
        function toggleMenu() {
            document.getElementById('mainNav').classList.toggle('active');
        }

        let swRegistration = null;
        
        async function initPushNotifications() {
            if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
                console.log('Push not supported');
                return;
            }
            
            if (localStorage.getItem('push_dismissed') === 'true') {
                return;
            }
            
            try {
                swRegistration = await navigator.serviceWorker.register('/sw.js');
                
                const subscription = await swRegistration.pushManager.getSubscription();
                if (subscription) {
                    console.log('Already subscribed');
                    return;
                }
                
                setTimeout(() => {
                    const prompt = document.getElementById('push-prompt');
                    prompt.style.display = 'block';
                    setTimeout(() => { prompt.style.transform = 'translateX(-50%) translateY(0)'; }, 50);
                }, 3000);
                
            } catch (err) {
                console.error('Service worker registration failed:', err);
            }
        }
        
        async function subscribePush() {
            try {
                const response = await fetch('/api/push/vapid-key');
                const { publicKey } = await response.json();
                
                const subscription = await swRegistration.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: urlBase64ToUint8Array(publicKey)
                });
                
                const subData = subscription.toJSON();
                await fetch('/api/push/subscribe', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        endpoint: subData.endpoint,
                        keys: subData.keys
                    })
                });
                
                hidePushPrompt();
                localStorage.setItem('push_subscribed', 'true');
                
            } catch (err) {
                console.error('Subscribe error:', err);
                hidePushPrompt();
            }
        }
        
        function dismissPush() {
            localStorage.setItem('push_dismissed', 'true');
            hidePushPrompt();
        }
        
        function hidePushPrompt() {
            const prompt = document.getElementById('push-prompt');
            prompt.style.transform = 'translateX(-50%) translateY(-150%)';
            setTimeout(() => { prompt.style.display = 'none'; }, 500);
        }
        
        function urlBase64ToUint8Array(base64String) {
            const padding = '='.repeat((4 - base64String.length % 4) % 4);
            const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');
            const rawData = window.atob(base64);
            const outputArray = new Uint8Array(rawData.length);
            for (let i = 0; i < rawData.length; ++i) {
                outputArray[i] = rawData.charCodeAt(i);
            }
            return outputArray;
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPushNotifications);
        } else {
            initPushNotifications();
        }
    </script>
</body>
</html>
