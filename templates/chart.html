{% extends "base.html" %}

{% block title %}{{ game_name }} Satta King Chart {{ month_name }} {{ selected_year }} | Record Chart{% endblock %}
{% block description %}Check {{ game_name }} Satta King Chart for {{ month_name }} {{ selected_year }}. View complete monthly record and historical results.{% endblock %}
{% block canonical %}/chart?game={{ game_name|urlencode }}{% endblock %}

{% block extra_head %}
<style>
    .chart-container { max-width: 1000px; margin: 0 auto; padding: 20px; }
    .chart-header { text-align: center; margin-bottom: 30px; }
    .chart-header h1 { color: #ffd700; font-size: 1.8rem; margin-bottom: 15px; }
    .filter-section { background: linear-gradient(145deg, #1f2937 0%, #111827 100%); border-radius: 15px; padding: 20px; margin-bottom: 30px; }
    .filter-row { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; justify-content: center; }
    .filter-row select { background: #111827; color: #fff; border: 1px solid #374151; padding: 10px 15px; border-radius: 8px; font-size: 1rem; }
    .filter-row button { background: linear-gradient(135deg, #e94560 0%, #c91f4d 100%); color: #fff; border: none; padding: 10px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; }
    .games-list { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 15px; }
    .games-list a { background: #1e3a5f; color: #fff; padding: 6px 12px; border-radius: 15px; text-decoration: none; font-size: 0.85rem; }
    .games-list a.active { background: #e94560; }
    .chart-table-container { overflow-x: auto; }
    .monthly-chart { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .monthly-chart th, .monthly-chart td { padding: 12px; text-align: center; border: 1px solid #374151; }
    .monthly-chart th { background: #1e3a5f; color: #ffd700; }
    .monthly-chart td { background: #111827; }
    .monthly-chart .has-result { color: #10b981; font-weight: 700; font-size: 1.1rem; }
    .stats-section { background: linear-gradient(145deg, #1f2937 0%, #111827 100%); border-radius: 15px; padding: 25px; margin-top: 30px; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; }
    .stat-box { background: #111827; padding: 15px; border-radius: 10px; text-align: center; border: 1px solid #374151; }
    .stat-value { font-size: 1.5rem; font-weight: 700; color: #ffd700; }
    .stat-label { color: #9ca3af; font-size: 0.8rem; margin-top: 5px; }
</style>
{% endblock %}

{% block content %}
<div class="chart-container">
    <div class="chart-header">
        <h1>{{ game_name }} Satta King Chart {{ month_name }} {{ selected_year }}</h1>
        <p>Complete monthly record for {{ game_name }} - {{ total_games }}+ games available</p>
    </div>

    <div class="filter-section">
        <form method="get" action="/chart">
            <div class="filter-row">
                <select name="game">
                    {% for g in all_games %}
                    <option value="{{ g }}" {% if g == game_name %}selected{% endif %}>{{ g }}</option>
                    {% endfor %}
                </select>
                <select name="month">
                    {% for m, name in months.items() %}
                    <option value="{{ m }}" {% if m == selected_month %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>
                <select name="year">
                    {% for y in available_years %}
                    <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>{{ y }}</option>
                    {% endfor %}
                </select>
                <button type="submit">View Chart</button>
            </div>
        </form>
        
        <div class="games-list">
            {% for g in all_games[:20] %}
            <a href="/chart?game={{ g|urlencode }}&month={{ selected_month }}&year={{ selected_year }}" {% if g == game_name %}class="active"{% endif %}>{{ g }}</a>
            {% endfor %}
        </div>
    </div>

    <div class="chart-table-container">
        <table class="monthly-chart">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Day</th>
                    <th>Result</th>
                </tr>
            </thead>
            <tbody>
                {% for day in range(1, days_in_month + 1) %}
                {% set date_str = '%04d-%02d-%02d'|format(selected_year, selected_month, day) %}
                <tr>
                    <td>{{ '%02d'|format(day) }}/{{ '%02d'|format(selected_month) }}/{{ selected_year }}</td>
                    <td>{{ day_names.get(date_str, '--') }}</td>
                    <td class="{% if result_map.get(date_str) and result_map.get(date_str) != '--' %}has-result{% endif %}">
                        {{ result_map.get(date_str, '--') or '--' }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="stats-section">
        <h3 style="color: #ffd700; margin-bottom: 20px;">{{ game_name }} Statistics - {{ month_name }} {{ selected_year }}</h3>
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-value">{{ odd_count }}</div>
                <div class="stat-label">Odd Numbers</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">{{ even_count }}</div>
                <div class="stat-label">Even Numbers</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">{{ hot_digits|join(', ') }}</div>
                <div class="stat-label">Hot Digits</div>
            </div>
            <div class="stat-box">
                <div class="stat-value">{{ results|length }}</div>
                <div class="stat-label">Total Results</div>
            </div>
        </div>
    </div>

    <div class="post-section" style="background: linear-gradient(145deg, #1f2937 0%, #111827 100%); border-radius: 15px; padding: 25px; margin-top: 30px;">
        <h2 style="color: #ffd700;">About {{ game_name }} Satta King Chart</h2>
        <p style="color: #d1d5db; line-height: 1.8;">This page shows the complete {{ game_name }} Satta King chart for {{ month_name }} {{ selected_year }}. You can view historical results, analyze patterns, and check statistics. Use the filters above to select different games, months, and years.</p>
    </div>
</div>
{% endblock %}
